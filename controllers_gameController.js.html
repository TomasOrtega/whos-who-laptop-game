<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: controllers/gameController.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: controllers/gameController.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>// server/controllers/gameController.js
const Game = require('../models/Game');

/**
 * Global instance of the two-player game. 
 * Call createGame() to reset.
 */
let currentGame = null;

/**
 * Create a fresh two-player game for Tomas and Nora.
 */
function createGame(req, res) {
  currentGame = new Game();
  return res.status(201).json({ message: 'Game Created' });
}

/**
 * Get the board + mystery for either "Tomas" or "Nora".
 * Expects ?playerName=Tomas or ?playerName=Nora or 
 * route param /:playerName.
 */
function getPlayerState(req, res) {
  if (!currentGame) {
    return res.status(404).json({ message: 'No active game found.' });
  }
  const playerName = req.params.playerName || req.query.playerName;
  if (!playerName) {
    return res.status(400).json({ message: 'playerName is required (Tomas/Nora).' });
  }

  try {
    const state = currentGame.getPlayerState(playerName);
    return res.json(state);
  } catch (err) {
    return res.status(400).json({ message: err.message });
  }
}

/**
 * Make a move: Gray out a character on the player's board.
 * Body must include { playerName, characterId }
 */
function makeMove(req, res) {
  if (!currentGame) {
    return res.status(400).json({ message: 'No active game found.' });
  }
  const { playerName, characterId } = req.body;
  if (!playerName || typeof characterId !== 'number') {
    return res.status(400).json({ message: 'playerName and numeric characterId are required.' });
  }

  try {
    currentGame.handleMove(playerName, characterId);
    return res.json({ message: `Move OK: ${playerName} grayed out ID ${characterId}.` });
  } catch (err) {
    return res.status(400).json({ error: err.message });
  }
}

module.exports = {
  createGame,
  getPlayerState,
  makeMove
};</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Classes</h3><ul><li><a href="Game.html">Game</a></li></ul><h3>Global</h3><ul><li><a href="global.html#createGame">createGame</a></li><li><a href="global.html#currentGame">currentGame</a></li><li><a href="global.html#getFirstLocalIPv4Address">getFirstLocalIPv4Address</a></li><li><a href="global.html#getPlayerState">getPlayerState</a></li><li><a href="global.html#logMessage">logMessage</a></li><li><a href="global.html#makeMove">makeMove</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.4</a> on Sun May 25 2025 21:13:39 GMT+0000 (Coordinated Universal Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
